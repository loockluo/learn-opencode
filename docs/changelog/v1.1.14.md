# v1.1.14：TUI 交互体验大升级

**发布日期**：2026年1月12日

---

## 一句话总结

这次更新让 **TUI 终端界面的鼠标交互更顺滑**，自动补全、问答选项都支持鼠标悬停和点击了，还修复了粘贴文本时光标位置错误的问题。

---

## 新功能：鼠标交互全面升级

### 这次更新了什么？

TUI（终端界面）现在支持更多鼠标操作：

- **自动补全**：鼠标悬停高亮、点击选择
- **问答选项**：鼠标悬停高亮、点击选择
- **子代理标题**：点击可跳转

### 为什么这很重要？

之前在 TUI 中，很多操作只能用键盘。现在你可以：

1. 用鼠标点击自动补全的选项，不用按方向键
2. 用鼠标点击问答选项，不用输入数字
3. 点击子代理标题，快速查看详情

**简单说**：键盘党继续用键盘，鼠标党也能愉快使用了。

---

## 问题修复：粘贴文本光标位置正确了

### 之前的问题

在 TUI 中粘贴单行文本后，光标位置会跑到错误的地方，导致继续输入时文字位置不对。

### 现在的情况

粘贴后光标会正确停在文本末尾，可以继续流畅输入。

---

## 问题修复：斜杠命令补全不再跳动

### 之前的问题

输入 `/` 后，自动补全列表的高亮行会莫名其妙地跳来跳去。

### 现在的情况

高亮行稳定了，选择命令更顺畅。

---

## 其他改进

### Desktop 桌面版

- **图片预览**：附件中的图片现在可以直接预览，不用打开外部程序

### Core 核心

- **MCP 工具输出**：支持 `resource` 内容类型
- **外部目录权限**：子目录权限检查更准确
- **OAuth 登录**：设备码不可用时自动复制 URL

---

## 要不要升级？

| 情况 | 建议 |
|------|------|
| 经常用 TUI 终端界面 | ✅ 升级，体验更好 |
| 之前遇到粘贴光标问题 | ✅ 升级 |
| 主要用 Desktop 桌面版 | 可以升级，有图片预览 |
| 用得好好的 | 可以等下次 |

**升级命令**：

```bash
opencode upgrade
```

---

## 技术细节（可跳过）

<details>
<summary>点击展开完整更新列表</summary>

### Core（核心）

- 支持 MCP 工具输出中的 `resource` 内容类型（@antigremlin）
- 检查子目录的外部目录权限（@dmmulroy）
- 升级 Copilot 插件版本

### TUI（终端界面）

- 添加子代理标题的点击导航
- 问答工具支持鼠标悬停和点击（@indeep99）
- 修复 prompt ref 初始化，防止未定义引用错误
- 重构事件流，使用 SDK 替代手动 RPC 订阅
- 修复粘贴单行文本时的光标位置（@Octane0411）
- 自动补全支持鼠标悬停和点击（@kitlangton）
- 设备码不可用时复制 OAuth URL（@itskingori）
- 修复斜杠命令补全高亮行跳动问题（@kitlangton）

### Desktop（桌面版）

- 图片附件支持预览（@dbpolito）

### 社区贡献

感谢 10 位社区贡献者：@kitlangton、@itskingori、@zeke、@dbpolito、@jacobwgillespie、@dmmulroy、@Octane0411、@indeep99、@antigremlin、@eyalch

</details>

---

[← 返回更新日志](./index.md)
