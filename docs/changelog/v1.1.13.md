# v1.1.13：桌面版会话分叉、搜索跟随符号链接

**发布日期**：2026年1月11日

---

## 一句话总结

这次更新让桌面版支持**会话分叉**，ripgrep 搜索**默认跟随符号链接**，并修复了多个 UI 问题。

---

## 新功能：桌面版会话分叉

### 这次更新了什么？

桌面应用现在支持从任意消息点**分叉会话**，创建新的对话分支。这意味着你可以：

- 从某个关键节点尝试不同的方向
- 保留原有对话的同时探索新思路
- 对比不同方案的效果

### 如何使用？

在桌面应用中：

1. 找到你想要分叉的消息
2. 右键点击该消息
3. 选择 **Fork Session**
4. 新会话会从该消息点开始，保留之前的上下文

---

## 改进：ripgrep 搜索跟随符号链接

### 之前的问题

使用 Grep 工具搜索代码时，如果项目中有**符号链接**（symlink）指向其他目录，这些目录中的文件不会被搜索到。

常见场景：
- monorepo 中的共享包
- node_modules 中的链接包
- 自定义的目录软链接

### 现在的情况

OpenCode 的 ripgrep 搜索现在**默认跟随符号链接**：

- ✅ 符号链接目录中的文件会被搜索
- ✅ 搜索结果更完整
- ✅ 无需额外配置

---

## 其他改进

### 命令面板修复

之前在 TUI 中使用命令面板时，鼠标悬停可能会高亮错误的选项。现在已修复，鼠标和键盘操作都能正确响应。

### 提示输入自动补全

桌面版的提示输入框现在支持：
- 鼠标悬停预览补全选项
- 点击直接选择补全项

### OpenAI Business 支持

`/connect` 命令现在完整支持 OpenAI Business 计划，解决了之前部分字段缺失的问题。

---

## 要不要升级？

| 情况 | 建议 |
|------|------|
| 使用桌面版 | ✅ 升级，体验会话分叉 |
| 项目有符号链接 | ✅ 升级，搜索更完整 |
| 使用 OpenAI Business | ✅ 升级，/connect 更稳定 |
| 用得好好的 | 可以等下次 |

**升级命令**：

```bash
opencode upgrade
```

---

## 技术细节（可跳过）

<details>
<summary>点击展开完整更新列表</summary>

### Core（核心）

- Codex 内置插件始终可用
- `/connect` 支持 OpenAI Business 计划（添加缺失字段）
- ACP 追踪文件修改（@wid4t）
- 传递 sessionID 到 chat.system.transform（@spoons-and-mirrors）
- 提取外部目录验证到共享工具函数，减少代码重复
- 排除 gpt-5.2-codex 的 'none' 变体（@Alejandro-CSt）
- ripgrep 搜索默认跟随符号链接（@kdcokenny）
- 禁用 PHP 语言服务器遥测（@madflow）

### TUI（终端界面）

- 修复 TUI 组件 props.ref 问题（@itsrainingmani）
- 修复命令面板鼠标悬停高亮错误项（@kitlangton）

### Desktop（桌面应用）

- 新增会话分叉功能（@dbpolito）
- 提示输入自动补全支持鼠标悬停和点击（@dbpolito）
- 添加缺失的 StoreExt 导入，修复未使用的 mut 警告（@jerome-benoit）
- 修复缺失导入导致桌面版构建失败（@Leka74）
- 支持配置默认服务器 URL（@athal7）
- 移除 serverDisplayName 函数中的 split 操作（@OpeOginni）

### 社区贡献者

感谢 13 位社区贡献者：@madflow、@dbpolito、@zerone0x、@OpeOginni、@athal7、@kdcokenny、@Alejandro-CSt、@Leka74、@jerome-benoit、@spoons-and-mirrors、@kitlangton、@wid4t、@itsrainingmani

</details>

---

[← 返回更新日志](./index.md)
